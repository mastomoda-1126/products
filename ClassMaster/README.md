# ClassMaster

英語教材の管理、英文表示（装飾・解説・音声）、PDF出力、出席登録までを一体化した学習支援アプリです。
教室運営で必要になる「教材の整理」「授業中の表示」「生徒の出欠記録」「バックアップ」を一つの画面で完結させることを目的にしています。

## 開発の背景と目的
授業時間を `T = B + E + P`（B: 板書・準備・切替などの無駄、E: 解説、P: 練習）と定義し、Tの中で無駄になりがちなBを大幅に削減することで、EとPを最大化するために作成しました。
また学習効率を `L = R x h`（L: 学習の成果、R: 効率、h: 時間）と定義し、hに対するRを高めてLの出力を上げることを目標としています。
そのため、PDFでの即時資料共有、QRコード経由での自作AIチューター・オンライン問題集への導線を整備しました。
導線の先では常に即時フィードバックが得られる設計とし、scaffoldingを意識した constructive/interactive learning へ発展させる狙いがあります。

## 主な機能
- 教材/レッスン/セクション管理
- 英文表示（装飾・日本語訳・解説・ハイライト）
- 長文モード（パラグラフ単位・セクションごとのページ区切り）
- PDF出力（レッスン全体/セクション別/全文/英文のみ/解説）
- 出席登録（名簿・日付ごとの出席/欠席/遅刻/早退/公欠）
- メモ（質問・理解度の記録、日付単位で保存）
- QR管理（クラスごとにURL/ラベル登録・プレビュー）
- バックアップ読込（保護済みバックアップの管理）

![メインキャンバス](assets/screenshot_01.png)

## アーキテクチャ
- 設計方針と分割構成: `docs/architecture.md`

## 動作環境
- Windows
- Python 3.10+ 推奨（動作確認は 3.14）
  - 音声再生は VLC または WinMM を使用（環境により挙動が変わります）

## セットアップ
1. 依存関係をインストール  
   - `pip install -r requirements.txt` がある場合はそれを使用  
   - 無い場合は `deps_install.txt` を参照  
2. 起動  
   - `py main.py`

## 使い方（概要）
1. 科目/クラス/教材名/レッスン/セクションを選択
2. 英文を表示し、装飾や解説を確認
3. PDF出力は「PDF出力」ボタンから
4. 出席登録は上部の人アイコンから  
   - 名簿タブで生徒を追加/削除/インポート  
   - 出席タブで日付ごとに出欠を記録  
5. 設定（歯車アイコン）  
   - QRコード管理  
   - バックアップ読込  
   - AI連携設定（APIキー）

## 名簿インポート
- `txt` または `csv` を使用できます
- `txt` は 1 行 1 名
- `csv` は 1 列目を生徒名として読み込みます（UTF-8/UTF-8 BOM対応）

## データと保存先
- DBは起動時に自動作成・読み込みされます
- バックアップは `db_backups/` に保存されます（保護対象は `protected_backups.json` で管理）
- 出席データは `students` / `attendance` テーブルに保存されます

## PDF出力とフォント
- 日本語PDFには日本語対応フォントが必要です  
  環境変数 `CLASSMASTA_PDF_JP_FONT` に TTF/OTF のパスを設定してください

## AI連携
- APIキーは `ai_keys.json` に保存されます
- 音声生成（例: ElevenLabs など）と文法解析（例: OpenAI など）を利用できます

## 注意
- `.env` や `*.db` は Git には含めない設定です
- AI音声/文法機能は設定画面でキーを登録してください

## 今後の予定
- 期間指定の出席サマリー表示/出力
